{% extends "admin_base.html" %}

{% block title %}
Exercises
{% endblock %}

{% block content %}

<table class="table table-hover">
    <thead>
        <tr>
        <th scope="col">Short Name</th>
        <th scope="col">Description</th>
        <th scope="col">Version</th>
        <th scope="col">Status</th>
        <th scope="col">#Instances</th>
        <th scope="col"></th>
        </tr>
    </thead>
    <tbody>
{% for e in exercises %}
    <tr>
        <td>{{ e.short_name }}</td>
        <td>{{ e.description }}</td>
        <td>{{ e.version }}</td>
        <td>{{ e.build_job_status.value }}</td>
        <td>{{ e.instances|length }}</td>
        <td>
            <div class="btn-group">
                {% if e.build_job_status.value == 'FINISHED' %}
                    {% if e.is_default %}
                    <a role="button" class="btn btn-outline-success" href="{{ url_for('ref.exercise_toggle_default', exercise_id=e.id) }}">Default</a>
                    {% else %}
                    <a role="button" class="btn btn-outline-danger" href="{{ url_for('ref.exercise_toggle_default', exercise_id=e.id) }}">Default</a>
                    {% endif %}
                {% endif %}
                <a role="button" class="btn btn-outline-success" href="{{ url_for('ref.exercise_view', exercise_id=e.id) }}">View</a>
                {% if e.build_job_status.value not in ['FINISHED', 'BUILDING'] %}
                <a role="button" class="btn btn-outline-success" href="{{ url_for('ref.exercise_build', exercise_id=e.id) }}">Build</a>
                {% endif %}
                {% if e.build_job_status.value not in ['BUILDING'] %}
                <a role="button" class="btn btn-outline-success" href="{{ url_for('ref.exercise_delete', exercise_id=e.id) }}">Delete</a>
                {% endif %}
            </div>
        </td>

        
    </tr>
{% endfor %}
  </tbody>
</table>

{% endblock %}
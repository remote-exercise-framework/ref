#This is the login name for the challenge (required)
short-name: "fake_canary"

#Based on this attribute, exercises are displayed in groups (required)
category: "Ãœbung 3"

#Description of the task. (optional)
description: |
    This is a description with
    preserved line
    breaks.

#Version of the exercises. This must be incremented to update
#older versions of the exercise. (required)
version: 12

#This section describes the entry service which is the container a
#user initially connects to. (required)
entry:
    #Files to copy into the container before running the build-cmd.
    #All files are initially owned by root and copied to /home/user. (optional)
    files:
        - canary
        - flag

    #The command used to build the entry container (optional).
    #The working directory is /home/user.
    #All commands are executed as root. The base image already
    #contains the following user accounts:
    #  user --- The account of the connected student
    #  admin --- An account that can be used to give, e.g., flags a different owner.
    build-cmd:
        - chmod 400 flag
        - chown admin:admin flag
        - chown admin:user canary
        - chmod 4550 canary

    #Whether ASLR is disable for this instance
    disable-aslr: True

    #Path to the folder that is persisted between exercise updates (optional).
    #If set to None, and read-only is False, users can create files, but they are
    #discarded as soon the container is stopped/restarted.
    #Defaults to None.
    persistance-path: /home/user

    #Whether the container is readonly. This flag and persistance-path are
    #mutally exclusive (optional).
    #If this flag is set to True, the user is not able to create files anywhere
    #in the mount tree.
    #Defaults to False.
    #read-only: False

    #Command that is executed when a user connects to the container (optional).
    #Defaults to /bin/bash
    #cmd: ['/bin/bash']

#Peripheral services that are deployed inside the network of the entry service (optional).
#These services can be used to deploy,
#e.g., networked applications that a user must exploit remotely.
services:

    #A service that is deployed inside the entry service network.
    #This container is reachable using the hostname
    #'some-service' (i.e., ping some-service).
    some-service:
        #Same as for the entry service
        files:
            - canary

        #Same as for the entry service
        build-cmd:
            - echo "xy"

        #Same as for the entry service
        disable-aslr: True

        #Command that is executed when the service is started (required)
        cmd: ['/bin/bash']

        #Whether the mount tree is readonly.
        #read-only: False
